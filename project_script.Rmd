---
title: "DS4-EDA Course Project"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### Preparing Data


```{r pm25}
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"

if (!file.exists("./tmp")) dir.create("./tmp")
if (!file.exists("./pm25_data")) dir.create("./pm25_data")

if (!file.exists("./tmp/pm25data.zip")){
        download.file(
        URL, destfile = "./tmp/pm25data.zip"
        )
} else {
        unzip("./tmp/pm25data.zip", exdir = "./pm25_data", overwrite = FALSE)
}
dir("./pm25_data/")


```

Each of the two files can be read using the ðš›ðšŽðšŠðšðšð™³ðš‚() function in R.

```{r cache=TRUE}

NEI <- readRDS("./pm25_data/summarySCC_PM25.rds")
SCC <- readRDS("./pm25_data/Source_Classification_Code.rds")

dim(NEI)
head(NEI)

dim(SCC)
head(SCC)
```


### 1. Have total emissions from PM2.5 decreased in the United States from 1999 to 2008? Using the base plotting system, make a plot showing the total PM2.5 emission from all sources for each of the years 1999, 2002, 2005, and 2008.

```{r cache=TRUE}
totalEmissions <- with(NEI, tapply(Emissions/1000,year,sum,na.rm=TRUE))
```
```{r echo=FALSE}
par(mar=c(5,5,4,1))
barplot(totalEmissions, xlab = "Year", ylab = "Total emissions, 1000 tonn", main="Total PM[2.5] emission from all sources \nfor the years 1999, 2002, 2005, and 2008")
dev.copy(png, filename="Plot1.png")
dev.off()
```

There is a clear downward trend in total emissions from PM2.5 in US in the years 1999, 2002, 2005, and 2008.

### 2. Have total emissions from PM2.5 decreased in the Baltimore City, Maryland (ðšðš’ðš™ðšœ == "ðŸ¸ðŸºðŸ»ðŸ·ðŸ¶") from 1999 to 2008? Use the base plotting system to make a plot answering this question.

```{r cache=TRUE}
baltimoreEmissions <- NEI[NEI$fips == "24510",]
baltimoreTotalEmissions <- with(baltimoreEmissions, tapply(Emissions/1000,year,sum,na.rm=TRUE))
```
```{r echo=FALSE}
par(mar=c(5,5,5,1))
barplot(baltimoreTotalEmissions, xlab = "Year", ylab = "Total emissions, 1000 tonn", main="PM2.5 emission from all sources \nin the Baltimore City, Maryland \nfor the years 1999, 2002, 2005, and 2008")
dev.copy(png, filename="Plot2.png")
dev.off()
```

### 3. Of the four types of sources indicated by the ðšðš¢ðš™ðšŽ (point, nonpoint, onroad, nonroad) variable, which of these four sources have seen decreases in emissions from 1999â€“2008 for Baltimore City? Which have seen increases in emissions from 1999â€“2008? Use the ggplot2 plotting system to make a plot answer this question.

```{r}

```


### 4. Across the United States, how have emissions from coal combustion-related sources changed from 1999â€“2008?

```{r}

```


### 5. How have emissions from motor vehicle sources changed from 1999â€“2008 in Baltimore City?

```{r}

```


### 6. Compare emissions from motor vehicle sources in Baltimore City with emissions from motor vehicle sources in Los Angeles County, California (ðšðš’ðš™ðšœ == "ðŸ¶ðŸ¼ðŸ¶ðŸ¹ðŸ½"). Which city has seen greater changes over time in motor vehicle emissions?

```{r}

```